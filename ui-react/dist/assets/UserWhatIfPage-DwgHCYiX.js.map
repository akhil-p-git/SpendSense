{"version":3,"file":"UserWhatIfPage-DwgHCYiX.js","sources":["../../src/components/whatif/ScenarioTabs.tsx","../../src/hooks/useDebounce.ts","../../src/components/whatif/ExtraDebtPayment.tsx","../../src/components/whatif/SubscriptionCancellation.tsx","../../src/components/whatif/IncreasedSavings.tsx","../../src/components/whatif/BasicScenariosTab.tsx","../../src/components/whatif/GoalBasedPlanningTab.tsx","../../src/components/whatif/CombinedScenariosTab.tsx","../../src/components/whatif/CompareScenariosTab.tsx","../../src/components/whatif/ExportButtons.tsx","../../src/features/whatif/WhatIfView.tsx","../../src/pages/UserWhatIfPage.tsx"],"sourcesContent":["/**\n * ScenarioTabs Component\n * Tab navigation for What-If scenario types\n */\n\nimport React from 'react';\n\ninterface ScenarioTab {\n  id: string;\n  label: string;\n}\n\ninterface ScenarioTabsProps {\n  tabs: ScenarioTab[];\n  activeTab: string;\n  onTabChange: (tabId: string) => void;\n}\n\nexport const ScenarioTabs: React.FC<ScenarioTabsProps> = ({ tabs, activeTab, onTabChange }) => {\n  return (\n    <div className=\"flex gap-2 mb-6 border-b-2 border-gray-200\">\n      {tabs.map((tab) => (\n        <button\n          key={tab.id}\n          onClick={() => onTabChange(tab.id)}\n          className={`\n            px-6 py-3 font-medium text-sm transition-colors whitespace-nowrap\n            border-b-3 -mb-0.5\n            ${\n              activeTab === tab.id\n                ? 'text-primary-600 border-b-3 border-primary-600 font-semibold'\n                : 'text-gray-600 border-b-3 border-transparent hover:text-primary-600 hover:border-primary-300'\n            }\n          `}\n        >\n          {tab.label}\n        </button>\n      ))}\n    </div>\n  );\n};\n\n","/**\n * Custom hook for debouncing values\n */\n\nimport { useState, useEffect } from 'react';\n\nexport function useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n","/**\n * ExtraDebtPayment Component\n * Simulates paying extra on credit card debt\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useWhatIfScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { useUserAccounts } from '@/hooks/useApi';\nimport { useDebounce } from '@/hooks/useDebounce';\nimport { Card } from '@/components/common/Card';\nimport { LoadingSpinner } from '@/components/common/LoadingSpinner';\nimport { ErrorMessage } from '@/components/common/ErrorMessage';\nimport { formatCurrency, formatPercentage } from '@/utils/format';\n\nexport const ExtraDebtPayment: React.FC = () => {\n  const { currentUserId } = useStore();\n  const { data: accountsData } = useUserAccounts(currentUserId);\n  const whatIfScenario = useWhatIfScenario();\n  \n  const [extraPayment, setExtraPayment] = useState(300);\n  const debouncedPayment = useDebounce(extraPayment, 500); // 500ms debounce\n  \n  // Find credit card account\n  const creditCard = accountsData?.accounts.find(acc => acc.type === 'credit card');\n  const accountId = creditCard?.account_id;\n\n  // Run simulation when debounced value changes\n  useEffect(() => {\n    if (currentUserId && accountId && debouncedPayment >= 0) {\n      whatIfScenario.mutate({\n        userId: currentUserId,\n        scenario: {\n          scenario_type: 'extra_credit_payment',\n          params: {\n            account_id: accountId,\n            extra_monthly_payment: debouncedPayment,\n            months: 12,\n          },\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUserId, accountId, debouncedPayment]);\n\n  if (!currentUserId) {\n    return (\n      <Card>\n        <p className=\"text-gray-500\">Please select a user to run simulations.</p>\n      </Card>\n    );\n  }\n\n  if (!accountId) {\n    return (\n      <Card>\n        <ErrorMessage message=\"No credit card account found for this user.\" />\n      </Card>\n    );\n  }\n\n  const result = whatIfScenario.data;\n  const isLoading = whatIfScenario.isPending;\n  const error = whatIfScenario.error;\n\n  return (\n    <Card>\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Extra Debt Payment</h3>\n      \n      {/* Slider */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <label className=\"text-sm font-medium text-gray-700\">Extra Monthly Payment</label>\n          <span className=\"text-lg font-semibold text-primary-600\">\n            {formatCurrency(extraPayment)}\n          </span>\n        </div>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1000\"\n          value={extraPayment}\n          onChange={(e) => setExtraPayment(parseInt(e.target.value))}\n          className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-600\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n          <span>$0</span>\n          <span>$1,000</span>\n        </div>\n      </div>\n\n      {/* Results */}\n      {isLoading && (\n        <div className=\"flex justify-center py-8\">\n          <LoadingSpinner size=\"md\" />\n        </div>\n      )}\n\n      {error && (\n        <ErrorMessage message={error instanceof Error ? error.message : 'Failed to run simulation'} />\n      )}\n\n      {result && result.scenario_type === 'extra_credit_payment' && (\n        <div className=\"space-y-4 pt-4 border-t border-gray-200\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <div className=\"text-sm text-gray-600 mb-1\">Current Balance</div>\n              <div className=\"text-lg font-semibold text-gray-900\">\n                {formatCurrency(result.current_balance)}\n              </div>\n            </div>\n            <div>\n              <div className=\"text-sm text-gray-600 mb-1\">APR</div>\n              <div className=\"text-lg font-semibold text-gray-900\">\n                {formatPercentage(result.apr)}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\n            <h4 className=\"font-semibold text-gray-900 mb-3\">Projected Impact</h4>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">New Payoff Date</span>\n                <span className=\"font-semibold text-gray-900\">\n                  {result.extra_payment_scenario.months_to_payoff.toFixed(0)} months\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Total Interest Saved</span>\n                <span className=\"font-semibold text-success-600\">\n                  {formatCurrency(result.savings.interest_saved)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Months Saved</span>\n                <span className=\"font-semibold text-primary-600\">\n                  {result.savings.months_saved.toFixed(0)} months\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {result.recommendation && (\n            <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\n              <p className=\"text-sm text-blue-800\">{result.recommendation}</p>\n            </div>\n          )}\n        </div>\n      )}\n    </Card>\n  );\n};\n\n","/**\n * SubscriptionCancellation Component\n * Simulates canceling subscriptions\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useWhatIfScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { useProfile } from '@/hooks/useApi';\nimport { Card } from '@/components/common/Card';\nimport { LoadingSpinner } from '@/components/common/LoadingSpinner';\nimport { ErrorMessage } from '@/components/common/ErrorMessage';\nimport { formatCurrency } from '@/utils/format';\n\ninterface Subscription {\n  name: string;\n  amount: number;\n}\n\nexport const SubscriptionCancellation: React.FC = () => {\n  const { currentUserId } = useStore();\n  const { data: profile } = useProfile(currentUserId);\n  const whatIfScenario = useWhatIfScenario();\n\n  // Get subscriptions from profile signals\n  const subscriptions: Subscription[] = React.useMemo(() => {\n    if (!profile?.signals?.subscriptions) return [];\n    \n    // Extract subscription data from signals\n    // For now, we'll create a mock list based on detected subscriptions\n    // In a real app, this would come from actual transaction analysis\n    const numSubscriptions = profile.signals.subscriptions.num_recurring_merchants || 0;\n    \n    // Create subscription list (in real app, this would be from actual data)\n    const commonSubscriptions: Subscription[] = [\n      { name: 'Netflix', amount: 15.99 },\n      { name: 'Spotify', amount: 10.99 },\n      { name: 'Adobe Creative', amount: 22.99 },\n      { name: 'Gym Membership', amount: 45.00 },\n      { name: 'Amazon Prime', amount: 14.99 },\n      { name: 'Disney+', amount: 10.99 },\n    ];\n    \n    // Return up to numSubscriptions or default list\n    return commonSubscriptions.slice(0, Math.max(numSubscriptions, 6));\n  }, [profile]);\n\n  const [selectedSubscriptions, setSelectedSubscriptions] = useState<Set<string>>(new Set());\n  const lastSelectedRef = useRef<string>(''); // Track last selected set to prevent duplicate calls\n  const simulationTimeoutRef = useRef<number | null>(null);\n\n  // Run simulation when selections change (with debouncing)\n  useEffect(() => {\n    // Clear any pending simulation\n    if (simulationTimeoutRef.current) {\n      clearTimeout(simulationTimeoutRef.current);\n      simulationTimeoutRef.current = null;\n    }\n\n    // Don't run if no user, no selections, or mutation is already pending\n    if (!currentUserId || selectedSubscriptions.size === 0 || whatIfScenario.isPending) {\n      // Reset ref when no selections\n      if (selectedSubscriptions.size === 0) {\n        lastSelectedRef.current = '';\n      }\n      return;\n    }\n\n    // Create a stable string representation of the selection\n    const selectionKey = Array.from(selectedSubscriptions).sort().join(',');\n\n    // Prevent duplicate calls with the same selection\n    if (lastSelectedRef.current === selectionKey) {\n      return;\n    }\n\n    // Debounce the simulation call to prevent rapid-fire requests\n    simulationTimeoutRef.current = setTimeout(() => {\n      // Check again if we should run (user might have deselected everything or mutation started)\n      if (selectedSubscriptions.size === 0 || !currentUserId || whatIfScenario.isPending) {\n        return;\n      }\n\n      const subscriptionsToCancel = subscriptions\n        .filter(sub => selectedSubscriptions.has(sub.name))\n        .map(sub => ({ name: sub.name, amount: sub.amount }));\n\n      // Update the ref before calling mutate\n      lastSelectedRef.current = selectionKey;\n\n      whatIfScenario.mutate({\n        userId: currentUserId,\n        scenario: {\n          scenario_type: 'subscription_cancellation',\n          params: {\n            subscriptions_to_cancel: subscriptionsToCancel,\n            months: 12,\n          },\n        },\n      });\n    }, 300); // 300ms debounce\n\n    // Cleanup function\n    return () => {\n      if (simulationTimeoutRef.current) {\n        clearTimeout(simulationTimeoutRef.current);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUserId, selectedSubscriptions]);\n\n  const handleToggleSubscription = (name: string) => {\n    setSelectedSubscriptions(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(name)) {\n        newSet.delete(name);\n      } else {\n        newSet.add(name);\n      }\n      return newSet;\n    });\n  };\n\n  if (!currentUserId) {\n    return (\n      <Card>\n        <p className=\"text-gray-500\">Please select a user to run simulations.</p>\n      </Card>\n    );\n  }\n\n  const result = whatIfScenario.data;\n  const isLoading = whatIfScenario.isPending;\n  const error = whatIfScenario.error;\n\n  return (\n    <Card>\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Subscription Cancellation</h3>\n      \n      {/* Subscription List */}\n      <div className=\"mb-6\">\n        <label className=\"text-sm font-medium text-gray-700 mb-3 block\">\n          Select subscriptions to cancel:\n        </label>\n        <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n          {subscriptions.map((sub) => (\n            <label\n              key={sub.name}\n              className=\"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer border border-gray-200\"\n            >\n              <input\n                type=\"checkbox\"\n                checked={selectedSubscriptions.has(sub.name)}\n                onChange={() => handleToggleSubscription(sub.name)}\n                className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n              />\n              <div className=\"flex-1 flex justify-between items-center\">\n                <span className=\"text-sm font-medium text-gray-900\">{sub.name}</span>\n                <span className=\"text-sm font-semibold text-gray-700\">\n                  {formatCurrency(sub.amount)}/month\n                </span>\n              </div>\n            </label>\n          ))}\n        </div>\n        {subscriptions.length === 0 && (\n          <p className=\"text-sm text-gray-500 py-4\">No recurring subscriptions detected.</p>\n        )}\n      </div>\n\n      {/* Results */}\n      {selectedSubscriptions.size === 0 && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <p className=\"text-sm\">Select subscriptions above to see projected savings.</p>\n        </div>\n      )}\n\n      {isLoading && selectedSubscriptions.size > 0 && (\n        <div className=\"flex justify-center py-8\">\n          <LoadingSpinner size=\"md\" />\n        </div>\n      )}\n\n      {error && selectedSubscriptions.size > 0 && (\n        <ErrorMessage message={error instanceof Error ? error.message : 'Failed to run simulation'} />\n      )}\n\n      {result && result.scenario_type === 'subscription_cancellation' && (\n        <div className=\"space-y-4 pt-4 border-t border-gray-200\">\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\n            <h4 className=\"font-semibold text-gray-900 mb-3\">Projected Savings</h4>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Monthly Savings</span>\n                <span className=\"font-semibold text-success-600\">\n                  {formatCurrency(result.monthly_savings)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Annual Savings</span>\n                <span className=\"font-semibold text-success-600\">\n                  {formatCurrency(result.annual_savings)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Cash Flow Freed</span>\n                <span className=\"font-semibold text-primary-600\">\n                  {result.percent_reduction.toFixed(1)}%\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {result.alternative_uses && result.alternative_uses.length > 0 && (\n            <div>\n              <h5 className=\"text-sm font-semibold text-gray-900 mb-2\">Alternative uses:</h5>\n              <ul className=\"space-y-1\">\n                {result.alternative_uses.map((use: string, index: number) => (\n                  <li key={index} className=\"text-sm text-gray-600 flex items-start\">\n                    <span className=\"mr-2\">•</span>\n                    <span>{use}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          {result.recommendation && (\n            <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\n              <p className=\"text-sm text-blue-800\">{result.recommendation}</p>\n            </div>\n          )}\n        </div>\n      )}\n    </Card>\n  );\n};\n\n","/**\n * IncreasedSavings Component\n * Simulates increasing monthly savings contributions\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useWhatIfScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { useDebounce } from '@/hooks/useDebounce';\nimport { Card } from '@/components/common/Card';\nimport { LoadingSpinner } from '@/components/common/LoadingSpinner';\nimport { ErrorMessage } from '@/components/common/ErrorMessage';\nimport { formatCurrency } from '@/utils/format';\n\nexport const IncreasedSavings: React.FC = () => {\n  const { currentUserId } = useStore();\n  const whatIfScenario = useWhatIfScenario();\n  \n  const [monthlyAmount, setMonthlyAmount] = useState(500);\n  const [targetAmount, setTargetAmount] = useState<string>('');\n  const debouncedAmount = useDebounce(monthlyAmount, 500); // 500ms debounce\n  \n  // Run simulation when debounced value changes\n  useEffect(() => {\n    if (currentUserId && debouncedAmount >= 0) {\n      whatIfScenario.mutate({\n        userId: currentUserId,\n        scenario: {\n          scenario_type: 'increased_savings',\n          params: {\n            monthly_amount: debouncedAmount,\n            target_amount: targetAmount ? parseFloat(targetAmount) : null,\n            months: 12,\n          },\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUserId, debouncedAmount, targetAmount]);\n\n  if (!currentUserId) {\n    return (\n      <Card>\n        <p className=\"text-gray-500\">Please select a user to run simulations.</p>\n      </Card>\n    );\n  }\n\n  const result = whatIfScenario.data;\n  const isLoading = whatIfScenario.isPending;\n  const error = whatIfScenario.error;\n\n  return (\n    <Card>\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Increased Savings</h3>\n      \n      {/* Monthly Amount Slider */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <label className=\"text-sm font-medium text-gray-700\">Monthly Savings Amount</label>\n          <span className=\"text-lg font-semibold text-primary-600\">\n            {formatCurrency(monthlyAmount)}\n          </span>\n        </div>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"2000\"\n          value={monthlyAmount}\n          onChange={(e) => setMonthlyAmount(parseInt(e.target.value))}\n          className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-600\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n          <span>$0</span>\n          <span>$2,000</span>\n        </div>\n      </div>\n\n      {/* Target Amount Input */}\n      <div className=\"mb-6\">\n        <label htmlFor=\"target-amount\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Target Amount (optional)\n        </label>\n        <input\n          type=\"number\"\n          id=\"target-amount\"\n          value={targetAmount}\n          onChange={(e) => setTargetAmount(e.target.value)}\n          placeholder=\"e.g., 10000\"\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n        />\n      </div>\n\n      {/* Results */}\n      {isLoading && (\n        <div className=\"flex justify-center py-8\">\n          <LoadingSpinner size=\"md\" />\n        </div>\n      )}\n\n      {error && (\n        <ErrorMessage message={error instanceof Error ? error.message : 'Failed to run simulation'} />\n      )}\n\n      {result && result.scenario_type === 'increased_savings' && (\n        <div className=\"space-y-4 pt-4 border-t border-gray-200\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <div className=\"text-sm text-gray-600 mb-1\">Current Savings</div>\n              <div className=\"text-lg font-semibold text-gray-900\">\n                {formatCurrency(result.current_state.savings_balance)}\n              </div>\n            </div>\n            <div>\n              <div className=\"text-sm text-gray-600 mb-1\">Monthly Contribution</div>\n              <div className=\"text-lg font-semibold text-primary-600\">\n                {formatCurrency(result.monthly_contribution)}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\n            <h4 className=\"font-semibold text-gray-900 mb-3\">Projected Growth (12 months)</h4>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Final Balance</span>\n                <span className=\"font-semibold text-success-600\">\n                  {formatCurrency(result.projected_state.final_balance)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Your Contributions</span>\n                <span className=\"font-semibold text-gray-900\">\n                  {formatCurrency(result.projected_state.total_contributions)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Interest Earned</span>\n                <span className=\"font-semibold text-success-600\">\n                  {formatCurrency(result.projected_state.interest_earned)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">Emergency Fund Coverage</span>\n                <span className=\"font-semibold text-primary-600\">\n                  {result.projected_state.emergency_fund_months.toFixed(1)} months\n                </span>\n              </div>\n              {result.months_to_target && (\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Time to Reach Goal</span>\n                  <span className=\"font-semibold text-primary-600\">\n                    {result.months_to_target} months\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {result.recommendation && (\n            <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\n              <p className=\"text-sm text-blue-800\">{result.recommendation}</p>\n            </div>\n          )}\n        </div>\n      )}\n    </Card>\n  );\n};\n\n","/**\n * BasicScenariosTab Component\n * Displays all three basic scenario simulators\n */\n\nimport React from 'react';\nimport { ExtraDebtPayment } from './ExtraDebtPayment';\nimport { SubscriptionCancellation } from './SubscriptionCancellation';\nimport { IncreasedSavings } from './IncreasedSavings';\n\nexport const BasicScenariosTab: React.FC = () => {\n  return (\n    <div className=\"space-y-8\">\n      <ExtraDebtPayment />\n      <SubscriptionCancellation />\n      <IncreasedSavings />\n    </div>\n  );\n};\n\n","/**\n * GoalBasedPlanningTab Component\n * Calculate required payment to pay off debt in target months\n */\n\nimport React, { useState } from 'react';\nimport { useWhatIfScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { useUserAccounts } from '@/hooks/useApi';\nimport { Card } from '@/components/common/Card';\nimport { Button } from '@/components/common/Button';\nimport { LoadingSpinner } from '@/components/common/LoadingSpinner';\nimport { ErrorMessage } from '@/components/common/ErrorMessage';\nimport { formatCurrency } from '@/utils/format';\n\nexport const GoalBasedPlanningTab: React.FC = () => {\n  const { currentUserId } = useStore();\n  const { data: accountsData } = useUserAccounts(currentUserId);\n  const whatIfScenario = useWhatIfScenario();\n  \n  const [targetMonths, setTargetMonths] = useState(12);\n  const [maxPayment, setMaxPayment] = useState<string>('');\n  const [isCalculating, setIsCalculating] = useState(false);\n\n  // Find credit card account\n  const creditCard = accountsData?.accounts.find(acc => acc.type === 'credit card');\n  const accountId = creditCard?.account_id;\n\n  const handleCalculate = () => {\n    if (!currentUserId || !accountId) return;\n    \n    setIsCalculating(true);\n    whatIfScenario.mutate({\n      userId: currentUserId,\n      scenario: {\n        scenario_type: 'goal_based_payment',\n        params: {\n          account_id: accountId,\n          target_months: targetMonths,\n          max_monthly_payment: maxPayment ? parseFloat(maxPayment) : null,\n        },\n      },\n    }, {\n      onSettled: () => setIsCalculating(false),\n    });\n  };\n\n  if (!currentUserId) {\n    return (\n      <Card>\n        <p className=\"text-gray-500\">Please select a user to run simulations.</p>\n      </Card>\n    );\n  }\n\n  if (!accountId) {\n    return (\n      <Card>\n        <ErrorMessage message=\"No credit card account found for this user.\" />\n      </Card>\n    );\n  }\n\n  const result = whatIfScenario.data;\n  const isLoading = whatIfScenario.isPending || isCalculating;\n  const error = whatIfScenario.error;\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Goal-Based Debt Payoff</h3>\n        \n        {/* Target Months Slider */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <label className=\"text-sm font-medium text-gray-700\">Target Months to Payoff</label>\n            <span className=\"text-lg font-semibold text-primary-600\">\n              {targetMonths} months\n            </span>\n          </div>\n          <input\n            type=\"range\"\n            min=\"6\"\n            max=\"60\"\n            value={targetMonths}\n            onChange={(e) => setTargetMonths(parseInt(e.target.value))}\n            className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-600\"\n          />\n          <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n            <span>6 months</span>\n            <span>60 months</span>\n          </div>\n        </div>\n\n        {/* Max Payment Input */}\n        <div className=\"mb-6\">\n          <label htmlFor=\"max-payment\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Max Monthly Payment (optional)\n          </label>\n          <input\n            type=\"number\"\n            id=\"max-payment\"\n            value={maxPayment}\n            onChange={(e) => setMaxPayment(e.target.value)}\n            placeholder=\"e.g., 1000\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n          />\n        </div>\n\n        {/* Calculate Button */}\n        <Button\n          variant=\"primary\"\n          onClick={handleCalculate}\n          disabled={isLoading}\n          className=\"w-full sm:w-auto\"\n        >\n          {isLoading ? (\n            <span className=\"flex items-center gap-2\">\n              <LoadingSpinner size=\"sm\" />\n              Calculating...\n            </span>\n          ) : (\n            'Calculate Required Payment'\n          )}\n        </Button>\n\n        {/* Results */}\n        {error && (\n          <div className=\"mt-4\">\n            <ErrorMessage message={error instanceof Error ? error.message : 'Failed to calculate payment'} />\n          </div>\n        )}\n\n        {result && result.scenario_type === 'goal_based_payment' && (\n          <div className=\"mt-6 space-y-4 pt-6 border-t border-gray-200\">\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h4 className=\"font-semibold text-gray-900 mb-3\">Goal-Based Plan Results</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Required Monthly Payment</span>\n                  <span className=\"font-semibold text-primary-600\">\n                    {formatCurrency(result.required_monthly_payment)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Current Minimum Payment</span>\n                  <span className=\"font-semibold text-gray-900\">\n                    {formatCurrency(result.current_minimum_payment)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Payment Increase Needed</span>\n                  <span className=\"font-semibold text-warning-600\">\n                    {formatCurrency(result.payment_increase)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Feasible with Goal?</span>\n                  <span className={`font-semibold ${result.is_feasible ? 'text-success-600' : 'text-danger-600'}`}>\n                    {result.is_feasible ? 'Yes' : 'No'}\n                  </span>\n                </div>\n                {!result.is_feasible && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm text-gray-600\">Actual Months with Max Payment</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {result.actual_months.toFixed(0)} months\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h4 className=\"font-semibold text-gray-900 mb-3\">Impact</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Interest Saved</span>\n                  <span className=\"font-semibold text-success-600\">\n                    {formatCurrency(result.impact.interest_saved)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Months Saved</span>\n                  <span className=\"font-semibold text-primary-600\">\n                    {result.impact.months_saved.toFixed(0)} months\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {result.recommendation && (\n              <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\n                <p className=\"text-sm text-blue-800\">{result.recommendation}</p>\n              </div>\n            )}\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n};\n\n","/**\n * CombinedScenariosTab Component\n * Run multiple scenarios together and see combined impact\n */\n\nimport React, { useState } from 'react';\nimport { useWhatIfScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { useUserAccounts, useProfile } from '@/hooks/useApi';\nimport { Card } from '@/components/common/Card';\nimport { Button } from '@/components/common/Button';\nimport { LoadingSpinner } from '@/components/common/LoadingSpinner';\nimport { ErrorMessage } from '@/components/common/ErrorMessage';\nimport { formatCurrency } from '@/utils/format';\n\ninterface Subscription {\n  name: string;\n  amount: number;\n}\n\nexport const CombinedScenariosTab: React.FC = () => {\n  const { currentUserId } = useStore();\n  const { data: accountsData } = useUserAccounts(currentUserId);\n  const { data: profile } = useProfile(currentUserId);\n  const whatIfScenario = useWhatIfScenario();\n\n  // Scenario states\n  const [includeExtraPayment, setIncludeExtraPayment] = useState(false);\n  const [extraPaymentAmount, setExtraPaymentAmount] = useState(200);\n  const [includeCancelSubscriptions, setIncludeCancelSubscriptions] = useState(false);\n  const [selectedSubscriptions, setSelectedSubscriptions] = useState<Set<string>>(new Set());\n  const [includeIncreaseSavings, setIncludeIncreaseSavings] = useState(false);\n  const [savingsAmount, setSavingsAmount] = useState(500);\n\n  // Get subscriptions from profile\n  const subscriptions: Subscription[] = React.useMemo(() => {\n    if (!profile?.signals?.subscriptions) return [];\n    \n    const numSubscriptions = profile.signals.subscriptions.num_recurring_merchants || 0;\n    \n    const commonSubscriptions: Subscription[] = [\n      { name: 'Netflix', amount: 15.99 },\n      { name: 'Spotify', amount: 10.99 },\n      { name: 'Adobe Creative', amount: 22.99 },\n      { name: 'Gym Membership', amount: 45.00 },\n      { name: 'Amazon Prime', amount: 14.99 },\n      { name: 'Disney+', amount: 10.99 },\n    ];\n    \n    return commonSubscriptions.slice(0, Math.max(numSubscriptions, 6));\n  }, [profile]);\n\n  // Find credit card account\n  const creditCard = accountsData?.accounts.find(acc => acc.type === 'credit card');\n  const accountId = creditCard?.account_id;\n\n  const handleRunCombined = () => {\n    if (!currentUserId) return;\n\n    const scenarios: any[] = [];\n\n    // Extra payment scenario\n    if (includeExtraPayment && accountId && extraPaymentAmount > 0) {\n      scenarios.push({\n        type: 'extra_credit_payment',\n        account_id: accountId,\n        amount: extraPaymentAmount,\n      });\n    }\n\n    // Subscription cancellation scenario\n    if (includeCancelSubscriptions && selectedSubscriptions.size > 0) {\n      scenarios.push({\n        type: 'subscription_cancellation',\n        subscriptions: subscriptions\n          .filter(sub => selectedSubscriptions.has(sub.name))\n          .map(sub => ({ name: sub.name, amount: sub.amount })),\n      });\n    }\n\n    // Increase savings scenario\n    if (includeIncreaseSavings && savingsAmount > 0) {\n      scenarios.push({\n        type: 'increased_savings',\n        amount: savingsAmount,\n      });\n    }\n\n    if (scenarios.length === 0) {\n      return;\n    }\n\n    whatIfScenario.mutate({\n      userId: currentUserId,\n      scenario: {\n        scenario_type: 'combined',\n        params: {\n          scenarios,\n          months: 12,\n        },\n      },\n    });\n  };\n\n  const handleToggleSubscription = (name: string) => {\n    setSelectedSubscriptions(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(name)) {\n        newSet.delete(name);\n      } else {\n        newSet.add(name);\n      }\n      return newSet;\n    });\n  };\n\n  if (!currentUserId) {\n    return (\n      <Card>\n        <p className=\"text-gray-500\">Please select a user to run simulations.</p>\n      </Card>\n    );\n  }\n\n  const result = whatIfScenario.data;\n  const isLoading = whatIfScenario.isPending;\n  const error = whatIfScenario.error;\n\n  const hasAnyScenarioSelected = includeExtraPayment || includeCancelSubscriptions || includeIncreaseSavings;\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Combined Scenario Builder</h3>\n        \n        {/* Extra Credit Payment */}\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg\">\n          <label className=\"flex items-center gap-3 mb-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={includeExtraPayment}\n              onChange={(e) => setIncludeExtraPayment(e.target.checked)}\n              className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n            />\n            <span className=\"font-medium text-gray-900\">Extra Credit Payment</span>\n          </label>\n          {includeExtraPayment && (\n            <div className=\"ml-7 mt-2\">\n              <input\n                type=\"number\"\n                value={extraPaymentAmount}\n                onChange={(e) => setExtraPaymentAmount(parseFloat(e.target.value) || 0)}\n                placeholder=\"200\"\n                min=\"0\"\n                className=\"w-full sm:w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Monthly extra payment amount</p>\n            </div>\n          )}\n        </div>\n\n        {/* Cancel Subscriptions */}\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg\">\n          <label className=\"flex items-center gap-3 mb-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={includeCancelSubscriptions}\n              onChange={(e) => setIncludeCancelSubscriptions(e.target.checked)}\n              className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n            />\n            <span className=\"font-medium text-gray-900\">Cancel Subscriptions</span>\n          </label>\n          {includeCancelSubscriptions && (\n            <div className=\"ml-7 mt-2\">\n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {subscriptions.map((sub) => (\n                  <label\n                    key={sub.name}\n                    className=\"flex items-center gap-3 p-2 rounded hover:bg-gray-50 cursor-pointer\"\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedSubscriptions.has(sub.name)}\n                      onChange={() => handleToggleSubscription(sub.name)}\n                      className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                    />\n                    <span className=\"text-sm text-gray-900 flex-1\">{sub.name}</span>\n                    <span className=\"text-sm font-semibold text-gray-700\">\n                      {formatCurrency(sub.amount)}/month\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Increase Savings */}\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg\">\n          <label className=\"flex items-center gap-3 mb-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={includeIncreaseSavings}\n              onChange={(e) => setIncludeIncreaseSavings(e.target.checked)}\n              className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n            />\n            <span className=\"font-medium text-gray-900\">Increase Savings</span>\n          </label>\n          {includeIncreaseSavings && (\n            <div className=\"ml-7 mt-2\">\n              <input\n                type=\"number\"\n                value={savingsAmount}\n                onChange={(e) => setSavingsAmount(parseFloat(e.target.value) || 0)}\n                placeholder=\"500\"\n                min=\"0\"\n                className=\"w-full sm:w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Monthly savings contribution</p>\n            </div>\n          )}\n        </div>\n\n        {/* Run Button */}\n        <Button\n          variant=\"primary\"\n          onClick={handleRunCombined}\n          disabled={isLoading || !hasAnyScenarioSelected}\n          className=\"w-full sm:w-auto\"\n        >\n          {isLoading ? (\n            <span className=\"flex items-center gap-2\">\n              <LoadingSpinner size=\"sm\" />\n              Running...\n            </span>\n          ) : (\n            'Run Combined Scenario'\n          )}\n        </Button>\n\n        {!hasAnyScenarioSelected && (\n          <p className=\"text-sm text-gray-500 mt-2\">Please select at least one scenario to run.</p>\n        )}\n      </Card>\n\n      {/* Results */}\n      {error && (\n        <Card>\n          <ErrorMessage message={error instanceof Error ? error.message : 'Failed to run combined scenario'} />\n        </Card>\n      )}\n\n      {result && result.scenario_type === 'combined' && (\n        <Card>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Combined Scenario Impact</h3>\n          \n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"text-sm text-gray-600 mb-1\">Monthly Cash Flow Impact</div>\n                <div className={`text-2xl font-bold ${result.monthly_cash_flow_impact >= 0 ? 'text-success-600' : 'text-danger-600'}`}>\n                  {formatCurrency(result.monthly_cash_flow_impact)}\n                </div>\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"text-sm text-gray-600 mb-1\">Annual Cash Flow Impact</div>\n                <div className={`text-2xl font-bold ${result.annual_cash_flow_impact >= 0 ? 'text-success-600' : 'text-danger-600'}`}>\n                  {formatCurrency(result.annual_cash_flow_impact)}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"text-sm text-gray-600 mb-1\">Total Interest Saved</div>\n                <div className=\"text-xl font-semibold text-success-600\">\n                  {formatCurrency(result.total_interest_saved)}\n                </div>\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"text-sm text-gray-600 mb-1\">Total Subscription Savings</div>\n                <div className=\"text-xl font-semibold text-purple-600\">\n                  {formatCurrency(result.total_subscription_savings)}\n                </div>\n              </div>\n            </div>\n\n            {result.summary && result.summary.length > 0 && (\n              <div className=\"bg-blue-50 border border-blue-200 p-4 rounded-lg\">\n                <h4 className=\"font-semibold text-gray-900 mb-2\">Summary</h4>\n                <ul className=\"space-y-1\">\n                  {result.summary.map((item: string, index: number) => (\n                    <li key={index} className=\"text-sm text-gray-700 flex items-start\">\n                      <span className=\"mr-2\">•</span>\n                      <span>{item}</span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n\n            {result.recommendation && (\n              <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\n                <p className=\"text-sm text-blue-800\">{result.recommendation}</p>\n              </div>\n            )}\n          </div>\n        </Card>\n      )}\n    </div>\n  );\n};\n\n","/**\n * CompareScenariosTab Component\n * Compare two scenarios side-by-side\n */\n\nimport React, { useState } from 'react';\nimport { useWhatIfScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { useUserAccounts, useProfile } from '@/hooks/useApi';\nimport { Card } from '@/components/common/Card';\nimport { Button } from '@/components/common/Button';\nimport { LoadingSpinner } from '@/components/common/LoadingSpinner';\nimport { ErrorMessage } from '@/components/common/ErrorMessage';\nimport { formatCurrency } from '@/utils/format';\n\ninterface Subscription {\n  name: string;\n  amount: number;\n}\n\ntype ScenarioType = 'extra_credit_payment' | 'subscription_cancellation' | 'increased_savings' | '';\n\ninterface ScenarioParams {\n  type: ScenarioType;\n  amount?: number;\n  target_amount?: number;\n  subscriptions?: Array<{ name: string; amount: number }>;\n}\n\nexport const CompareScenariosTab: React.FC = () => {\n  const { currentUserId } = useStore();\n  const { data: accountsData } = useUserAccounts(currentUserId);\n  const { data: profile } = useProfile(currentUserId);\n  const whatIfScenario = useWhatIfScenario();\n\n  // Scenario A state\n  const [scenarioAType, setScenarioAType] = useState<ScenarioType>('');\n  const [scenarioAParams, setScenarioAParams] = useState<ScenarioParams>({ type: '' });\n\n  // Scenario B state\n  const [scenarioBType, setScenarioBType] = useState<ScenarioType>('');\n  const [scenarioBParams, setScenarioBParams] = useState<ScenarioParams>({ type: '' });\n\n  // Find credit card account\n  const creditCard = accountsData?.accounts.find(acc => acc.type === 'credit card');\n  const accountId = creditCard?.account_id;\n\n  // Get subscriptions\n  const subscriptions: Subscription[] = React.useMemo(() => {\n    if (!profile?.signals?.subscriptions) return [];\n    \n    const numSubscriptions = profile.signals.subscriptions.num_recurring_merchants || 0;\n    \n    const commonSubscriptions: Subscription[] = [\n      { name: 'Netflix', amount: 15.99 },\n      { name: 'Spotify', amount: 10.99 },\n      { name: 'Adobe Creative', amount: 22.99 },\n      { name: 'Gym Membership', amount: 45.00 },\n      { name: 'Amazon Prime', amount: 14.99 },\n      { name: 'Disney+', amount: 10.99 },\n    ];\n    \n    return commonSubscriptions.slice(0, Math.max(numSubscriptions, 6));\n  }, [profile]);\n\n  const updateScenarioAParams = (type: ScenarioType) => {\n    setScenarioAType(type);\n    if (type === 'extra_credit_payment') {\n      setScenarioAParams({ type, amount: 200 });\n    } else if (type === 'subscription_cancellation') {\n      setScenarioAParams({ type, subscriptions: [] });\n    } else if (type === 'increased_savings') {\n      setScenarioAParams({ type, amount: 500 });\n    } else {\n      setScenarioAParams({ type: '' });\n    }\n  };\n\n  const updateScenarioBParams = (type: ScenarioType) => {\n    setScenarioBType(type);\n    if (type === 'extra_credit_payment') {\n      setScenarioBParams({ type, amount: 200 });\n    } else if (type === 'subscription_cancellation') {\n      setScenarioBParams({ type, subscriptions: [] });\n    } else if (type === 'increased_savings') {\n      setScenarioBParams({ type, amount: 500 });\n    } else {\n      setScenarioBParams({ type: '' });\n    }\n  };\n\n  const handleCompare = () => {\n    if (!currentUserId || !scenarioAType || !scenarioBType) return;\n\n    // Build scenario A\n    const scenarioA: any = { type: scenarioAType };\n    if (scenarioAType === 'extra_credit_payment') {\n      scenarioA.account_id = accountId;\n      scenarioA.amount = scenarioAParams.amount || 200;\n    } else if (scenarioAType === 'subscription_cancellation') {\n      scenarioA.subscriptions = scenarioAParams.subscriptions || [];\n    } else if (scenarioAType === 'increased_savings') {\n      scenarioA.amount = scenarioAParams.amount || 500;\n      scenarioA.target_amount = scenarioAParams.target_amount || null;\n    }\n\n    // Build scenario B\n    const scenarioB: any = { type: scenarioBType };\n    if (scenarioBType === 'extra_credit_payment') {\n      scenarioB.account_id = accountId;\n      scenarioB.amount = scenarioBParams.amount || 200;\n    } else if (scenarioBType === 'subscription_cancellation') {\n      scenarioB.subscriptions = scenarioBParams.subscriptions || [];\n    } else if (scenarioBType === 'increased_savings') {\n      scenarioB.amount = scenarioBParams.amount || 500;\n      scenarioB.target_amount = scenarioBParams.target_amount || null;\n    }\n\n    whatIfScenario.mutate({\n      userId: currentUserId,\n      scenario: {\n        scenario_type: 'compare',\n        params: {\n          scenario_a: scenarioA,\n          scenario_b: scenarioB,\n        },\n      },\n    });\n  };\n\n  if (!currentUserId) {\n    return (\n      <Card>\n        <p className=\"text-gray-500\">Please select a user to run simulations.</p>\n      </Card>\n    );\n  }\n\n  const result = whatIfScenario.data;\n  const isLoading = whatIfScenario.isPending;\n  const error = whatIfScenario.error;\n\n  const canCompare = scenarioAType && scenarioBType;\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Compare Two Scenarios</h3>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Scenario A */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-gray-900\">Scenario A</h4>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Scenario Type\n              </label>\n              <select\n                value={scenarioAType}\n                onChange={(e) => updateScenarioAParams(e.target.value as ScenarioType)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              >\n                <option value=\"\">Select scenario type...</option>\n                <option value=\"extra_credit_payment\">Extra Credit Payment</option>\n                <option value=\"subscription_cancellation\">Cancel Subscriptions</option>\n                <option value=\"increased_savings\">Increase Savings</option>\n              </select>\n            </div>\n\n            {/* Dynamic params for Scenario A */}\n            {scenarioAType === 'extra_credit_payment' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Extra Payment Amount\n                </label>\n                <input\n                  type=\"number\"\n                  value={scenarioAParams.amount || 200}\n                  onChange={(e) => setScenarioAParams({ ...scenarioAParams, amount: parseFloat(e.target.value) || 0 })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                />\n              </div>\n            )}\n\n            {scenarioAType === 'subscription_cancellation' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Select Subscriptions\n                </label>\n                <div className=\"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-2\">\n                  {subscriptions.map((sub) => (\n                    <label\n                      key={sub.name}\n                      className=\"flex items-center gap-2 p-2 rounded hover:bg-gray-50 cursor-pointer\"\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={scenarioAParams.subscriptions?.some(s => s.name === sub.name) || false}\n                        onChange={(e) => {\n                          const current = scenarioAParams.subscriptions || [];\n                          if (e.target.checked) {\n                            setScenarioAParams({\n                              ...scenarioAParams,\n                              subscriptions: [...current, { name: sub.name, amount: sub.amount }],\n                            });\n                          } else {\n                            setScenarioAParams({\n                              ...scenarioAParams,\n                              subscriptions: current.filter(s => s.name !== sub.name),\n                            });\n                          }\n                        }}\n                        className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                      />\n                      <span className=\"text-sm text-gray-900 flex-1\">{sub.name}</span>\n                      <span className=\"text-sm font-semibold text-gray-700\">\n                        {formatCurrency(sub.amount)}/month\n                      </span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {scenarioAType === 'increased_savings' && (\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Monthly Savings Amount\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={scenarioAParams.amount || 500}\n                    onChange={(e) => setScenarioAParams({ ...scenarioAParams, amount: parseFloat(e.target.value) || 0 })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Target Amount (optional)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={scenarioAParams.target_amount || ''}\n                    onChange={(e) => setScenarioAParams({ ...scenarioAParams, target_amount: parseFloat(e.target.value) || undefined })}\n                    placeholder=\"e.g., 10000\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Scenario B */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-gray-900\">Scenario B</h4>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Scenario Type\n              </label>\n              <select\n                value={scenarioBType}\n                onChange={(e) => updateScenarioBParams(e.target.value as ScenarioType)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              >\n                <option value=\"\">Select scenario type...</option>\n                <option value=\"extra_credit_payment\">Extra Credit Payment</option>\n                <option value=\"subscription_cancellation\">Cancel Subscriptions</option>\n                <option value=\"increased_savings\">Increase Savings</option>\n              </select>\n            </div>\n\n            {/* Dynamic params for Scenario B */}\n            {scenarioBType === 'extra_credit_payment' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Extra Payment Amount\n                </label>\n                <input\n                  type=\"number\"\n                  value={scenarioBParams.amount || 200}\n                  onChange={(e) => setScenarioBParams({ ...scenarioBParams, amount: parseFloat(e.target.value) || 0 })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                />\n              </div>\n            )}\n\n            {scenarioBType === 'subscription_cancellation' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Select Subscriptions\n                </label>\n                <div className=\"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-2\">\n                  {subscriptions.map((sub) => (\n                    <label\n                      key={sub.name}\n                      className=\"flex items-center gap-2 p-2 rounded hover:bg-gray-50 cursor-pointer\"\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={scenarioBParams.subscriptions?.some(s => s.name === sub.name) || false}\n                        onChange={(e) => {\n                          const current = scenarioBParams.subscriptions || [];\n                          if (e.target.checked) {\n                            setScenarioBParams({\n                              ...scenarioBParams,\n                              subscriptions: [...current, { name: sub.name, amount: sub.amount }],\n                            });\n                          } else {\n                            setScenarioBParams({\n                              ...scenarioBParams,\n                              subscriptions: current.filter(s => s.name !== sub.name),\n                            });\n                          }\n                        }}\n                        className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                      />\n                      <span className=\"text-sm text-gray-900 flex-1\">{sub.name}</span>\n                      <span className=\"text-sm font-semibold text-gray-700\">\n                        {formatCurrency(sub.amount)}/month\n                      </span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {scenarioBType === 'increased_savings' && (\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Monthly Savings Amount\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={scenarioBParams.amount || 500}\n                    onChange={(e) => setScenarioBParams({ ...scenarioBParams, amount: parseFloat(e.target.value) || 0 })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Target Amount (optional)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={scenarioBParams.target_amount || ''}\n                    onChange={(e) => setScenarioBParams({ ...scenarioBParams, target_amount: parseFloat(e.target.value) || undefined })}\n                    placeholder=\"e.g., 10000\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Compare Button */}\n        <div className=\"mt-6\">\n          <Button\n            variant=\"primary\"\n            onClick={handleCompare}\n            disabled={isLoading || !canCompare}\n            className=\"w-full sm:w-auto\"\n          >\n            {isLoading ? (\n              <span className=\"flex items-center gap-2\">\n                <LoadingSpinner size=\"sm\" />\n                Comparing...\n              </span>\n            ) : (\n              'Compare Scenarios'\n            )}\n          </Button>\n          {!canCompare && (\n            <p className=\"text-sm text-gray-500 mt-2\">Please select both scenarios to compare.</p>\n          )}\n        </div>\n      </Card>\n\n      {/* Results */}\n      {error && (\n        <Card>\n          <ErrorMessage message={error instanceof Error ? error.message : 'Failed to compare scenarios'} />\n        </Card>\n      )}\n\n      {result && result.scenario_type === 'compare' && (\n        <Card>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Scenario Comparison</h3>\n          \n          <div className=\"space-y-6\">\n            {/* Scenario Overview */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h4 className=\"font-semibold text-gray-900 mb-2\">\n                  Scenario A: {result.scenario_a.scenario_type.replace('_', ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\n                </h4>\n                <p className=\"text-sm text-gray-600\">\n                  {result.scenario_a.scenario_type === 'extra_credit_payment' && (\n                    <span>Extra payment: {formatCurrency(result.scenario_a.extra_payment_scenario?.monthly_payment || 0)}</span>\n                  )}\n                  {result.scenario_a.scenario_type === 'subscription_cancellation' && (\n                    <span>Monthly savings: {formatCurrency(result.scenario_a.monthly_savings || 0)}</span>\n                  )}\n                  {result.scenario_a.scenario_type === 'increased_savings' && (\n                    <span>Final balance: {formatCurrency(result.scenario_a.projected_state?.final_balance || 0)}</span>\n                  )}\n                </p>\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h4 className=\"font-semibold text-gray-900 mb-2\">\n                  Scenario B: {result.scenario_b.scenario_type.replace('_', ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\n                </h4>\n                <p className=\"text-sm text-gray-600\">\n                  {result.scenario_b.scenario_type === 'extra_credit_payment' && (\n                    <span>Extra payment: {formatCurrency(result.scenario_b.extra_payment_scenario?.monthly_payment || 0)}</span>\n                  )}\n                  {result.scenario_b.scenario_type === 'subscription_cancellation' && (\n                    <span>Monthly savings: {formatCurrency(result.scenario_b.monthly_savings || 0)}</span>\n                  )}\n                  {result.scenario_b.scenario_type === 'increased_savings' && (\n                    <span>Final balance: {formatCurrency(result.scenario_b.projected_state?.final_balance || 0)}</span>\n                  )}\n                </p>\n              </div>\n            </div>\n\n            {/* Comparison Metrics */}\n            {result.comparison_metrics && (\n              <div className=\"bg-blue-50 border border-blue-200 p-4 rounded-lg\">\n                <h4 className=\"font-semibold text-gray-900 mb-3\">Comparison Metrics</h4>\n                {result.comparison_metrics.better_scenario && (\n                  <div className=\"mb-3\">\n                    <span className=\"text-sm text-gray-600\">Better Scenario: </span>\n                    <span className=\"font-semibold text-primary-600\">\n                      Scenario {result.comparison_metrics.better_scenario.toUpperCase()}\n                    </span>\n                  </div>\n                )}\n                {result.comparison_metrics.recommendation && (\n                  <p className=\"text-sm text-blue-800\">{result.comparison_metrics.recommendation}</p>\n                )}\n              </div>\n            )}\n          </div>\n        </Card>\n      )}\n    </div>\n  );\n};\n\n","/**\n * ExportButtons Component\n * Export scenario results as PDF or JSON\n */\n\nimport React from 'react';\nimport { useExportScenario } from '@/hooks/useApi';\nimport { useStore } from '@/store/useStore';\nimport { Button } from '@/components/common/Button';\nimport type { ScenarioResult } from '@/types';\n\ninterface ExportButtonsProps {\n  scenarioResult: ScenarioResult | null;\n}\n\nexport const ExportButtons: React.FC<ExportButtonsProps> = ({ scenarioResult }) => {\n  const { currentUserId } = useStore();\n  const exportScenario = useExportScenario();\n\n  const handleExport = async (format: 'pdf' | 'json') => {\n    // Prevent multiple simultaneous export calls\n    if (!scenarioResult || !currentUserId || exportScenario.isPending) {\n      return;\n    }\n\n    try {\n      const blob = await exportScenario.mutateAsync({\n        userId: currentUserId,\n        scenarioResult,\n        format,\n      });\n\n      // Create download link\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `scenario_report_${new Date().toISOString().split('T')[0]}.${format}`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (error) {\n      // Only log error once, don't spam console\n      if (!(error as any)?.__handled) {\n        console.error('Export failed:', error);\n        (error as any).__handled = true;\n      }\n      alert(`Failed to export ${format.toUpperCase()}: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  };\n\n  if (!scenarioResult) {\n    return null;\n  }\n\n  return (\n    <div className=\"flex gap-3 justify-end mt-6\">\n      <Button\n        variant=\"secondary\"\n        onClick={() => handleExport('json')}\n        disabled={exportScenario.isPending}\n      >\n        {exportScenario.isPending ? 'Exporting...' : 'Export as JSON'}\n      </Button>\n      <Button\n        variant=\"secondary\"\n        onClick={() => handleExport('pdf')}\n        disabled={exportScenario.isPending}\n      >\n        {exportScenario.isPending ? 'Exporting...' : 'Export as PDF'}\n      </Button>\n    </div>\n  );\n};\n\n","/**\n * WhatIfView Component\n * Main What-If simulator with scenario type tabs\n */\n\nimport React, { useState } from 'react';\nimport { ScenarioTabs } from '@/components/whatif/ScenarioTabs';\nimport { BasicScenariosTab } from '@/components/whatif/BasicScenariosTab';\nimport { GoalBasedPlanningTab } from '@/components/whatif/GoalBasedPlanningTab';\nimport { CombinedScenariosTab } from '@/components/whatif/CombinedScenariosTab';\nimport { CompareScenariosTab } from '@/components/whatif/CompareScenariosTab';\nimport { ExportButtons } from '@/components/whatif/ExportButtons';\nimport { useWhatIfScenario } from '@/hooks/useApi';\n\nexport const WhatIfView: React.FC = () => {\n  const [activeScenarioTab, setActiveScenarioTab] = useState('basic');\n  const whatIfScenario = useWhatIfScenario();\n\n  const scenarioTabs = [\n    { id: 'basic', label: 'Basic Scenarios' },\n    { id: 'goal', label: 'Goal-Based Planning' },\n    { id: 'combined', label: 'Combined Scenarios' },\n    { id: 'compare', label: 'Compare Scenarios' },\n  ];\n\n  // Get current scenario result for export\n  const currentScenarioResult = whatIfScenario.data;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Scenario Type Tabs */}\n      <ScenarioTabs\n        tabs={scenarioTabs}\n        activeTab={activeScenarioTab}\n        onTabChange={setActiveScenarioTab}\n      />\n\n      {/* Tab Content */}\n      <div className=\"mt-6\">\n        {activeScenarioTab === 'basic' && <BasicScenariosTab />}\n        {activeScenarioTab === 'goal' && <GoalBasedPlanningTab />}\n        {activeScenarioTab === 'combined' && <CombinedScenariosTab />}\n        {activeScenarioTab === 'compare' && <CompareScenariosTab />}\n      </div>\n\n      {/* Export Buttons - Show when results exist */}\n      <ExportButtons scenarioResult={currentScenarioResult || null} />\n    </div>\n  );\n};\n","/**\n * User What-If Simulator Page\n */\n\nimport React from 'react';\nimport { useParams, Navigate } from 'react-router-dom';\nimport { WhatIfView } from '@/features/whatif/WhatIfView';\nimport { useStore } from '@/store/useStore';\n\nexport const UserWhatIfPage: React.FC = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const { setCurrentUserId } = useStore();\n\n  React.useEffect(() => {\n    if (userId) {\n      setCurrentUserId(userId);\n    }\n  }, [userId, setCurrentUserId]);\n\n  if (!userId) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">What-If Scenario Simulator</h2>\n      <WhatIfView />\n    </div>\n  );\n};\n\n"],"names":["ScenarioTabs","tabs","activeTab","onTabChange","tab","jsx","useDebounce","value","delay","debouncedValue","setDebouncedValue","useState","useEffect","handler","ExtraDebtPayment","currentUserId","useStore","accountsData","useUserAccounts","whatIfScenario","useWhatIfScenario","extraPayment","setExtraPayment","debouncedPayment","creditCard","acc","accountId","Card","ErrorMessage","result","isLoading","error","jsxs","formatCurrency","e","LoadingSpinner","formatPercentage","SubscriptionCancellation","profile","useProfile","subscriptions","React","_a","numSubscriptions","selectedSubscriptions","setSelectedSubscriptions","lastSelectedRef","useRef","simulationTimeoutRef","selectionKey","subscriptionsToCancel","sub","handleToggleSubscription","name","prev","newSet","use","index","IncreasedSavings","monthlyAmount","setMonthlyAmount","targetAmount","setTargetAmount","debouncedAmount","BasicScenariosTab","GoalBasedPlanningTab","targetMonths","setTargetMonths","maxPayment","setMaxPayment","isCalculating","setIsCalculating","handleCalculate","Button","CombinedScenariosTab","includeExtraPayment","setIncludeExtraPayment","extraPaymentAmount","setExtraPaymentAmount","includeCancelSubscriptions","setIncludeCancelSubscriptions","includeIncreaseSavings","setIncludeIncreaseSavings","savingsAmount","setSavingsAmount","handleRunCombined","scenarios","hasAnyScenarioSelected","item","CompareScenariosTab","scenarioAType","setScenarioAType","scenarioAParams","setScenarioAParams","scenarioBType","setScenarioBType","scenarioBParams","setScenarioBParams","updateScenarioAParams","type","updateScenarioBParams","handleCompare","scenarioA","scenarioB","canCompare","s","current","l","_b","_c","_d","ExportButtons","scenarioResult","exportScenario","useExportScenario","handleExport","format","blob","url","a","WhatIfView","activeScenarioTab","setActiveScenarioTab","scenarioTabs","currentScenarioResult","UserWhatIfPage","userId","useParams","setCurrentUserId","Navigate"],"mappings":"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"}
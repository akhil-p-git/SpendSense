import{j as e,C as i,B as u,u as h,a as g,b as p,L as j,E as f,c as b,R as N,N as y}from"./index-DWPGfbpl.js";const m=({recommendation:s,onTrackClick:t,userId:x})=>{const c=()=>{if(t&&x){const n=s.id||s.title;t(n,s.type)}s.url&&window.open(s.url,"_blank","noopener,noreferrer")},d=s.type==="education",o=d?"bg-blue-100 text-blue-800 border-blue-300":"bg-purple-100 text-purple-800 border-purple-300",r=d?"EDUCATION":"PARTNER OFFER";return e.jsx(i,{className:"hover:shadow-lg transition-shadow duration-200",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded border ${o}`,children:r})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-600 mb-3 leading-relaxed",children:s.description}),s.rationale&&e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{className:"text-gray-900",children:"Because:"})," ",s.rationale]})}),s.url&&e.jsx("div",{className:"flex items-center justify-between mt-auto",children:e.jsx(u,{variant:"primary",size:"sm",onClick:c,className:"flex-1 sm:flex-none",children:"Learn More"})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 italic",children:"This is educational content, not financial advice."})})]})})},v=()=>{const{currentUserId:s}=h(),{data:t,isLoading:x,error:c}=g(s),d=p(),o=(a,l)=>{s&&d.mutate({userId:s,recommendationId:a,type:l})};if(!s)return e.jsx("div",{className:"text-center text-gray-500 py-12",children:e.jsx(i,{children:e.jsx("p",{className:"text-lg",children:"Please select a user to view recommendations"})})});if(x)return e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading recommendations..."})]})});if(c){const a=c instanceof Error?c.message:"Failed to load recommendations",l=a.toLowerCase().includes("consent")||a.toLowerCase().includes("403");return e.jsxs("div",{className:"py-6",children:[e.jsx(f,{message:a}),l&&e.jsx(i,{className:"mt-4 bg-yellow-50 border-yellow-200",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Consent Required:"})," This user has not provided consent for data processing. Please update their consent status to view recommendations."]})})]})}if(!t)return e.jsx("div",{className:"text-center text-gray-500 py-12",children:e.jsx(i,{children:e.jsx("p",{className:"text-lg",children:"No recommendations available"})})});const r=t.education||[],n=t.offers||[];return e.jsxs("div",{className:"space-y-8",children:[t.disclaimer&&e.jsx(i,{className:"bg-blue-50 border-blue-200",children:e.jsx("p",{className:"text-sm text-blue-800",children:t.disclaimer})}),r.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Educational Content"}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[r.length," ",r.length===1?"item":"items"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((a,l)=>e.jsx(m,{recommendation:a,onTrackClick:o,userId:s},a.id||`edu-${l}`))})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Partner Offers"}),e.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:[n.length," ",n.length===1?"offer":"offers"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map((a,l)=>e.jsx(m,{recommendation:a,onTrackClick:o,userId:s},a.id||`offer-${l}`))})]}),r.length===0&&n.length===0&&e.jsx(i,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"No recommendations available at this time."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Recommendations are generated based on your financial profile and behavioral signals."})]})})]})},R=()=>{const{userId:s}=b(),{setCurrentUserId:t}=h();return N.useEffect(()=>{s&&t(s)},[s,t]),s?e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Personalized Recommendations"}),e.jsx(v,{})]}):e.jsx(y,{to:"/",replace:!0})};export{R as UserRecommendationsPage};
//# sourceMappingURL=UserRecommendationsPage-C9LR8geP.js.map
